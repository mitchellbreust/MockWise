commands:
  01_install_node:
    command: |
      curl -fsSL https://deb.nodesource.com/setup_22.x | bash -
      apt-get install -y nodejs

container_commands:
  01_install_dependencies:
    command: |
      npm ci
      cd src/client/frontend && npm ci
      cd ../../..

option_settings:
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: nginx
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: "production"
    NPM_USE_PRODUCTION: "false"
    PORT: "8081"
    COMMAND: "npm start"
  aws:elasticbeanstalk:environment:process:default:
    Port: "8081"
    HealthCheckPath: "/health"
    MatcherHTTPCode: "200"
